<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>Focused To-Do</title>
  <script src="https://cdn.jsdelivr.net/npm/vue@3.4.15/dist/vue.global.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap');

    body {
      font-family: 'Kanit', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .popup-enter-active, .popup-leave-active {
      transition: opacity 0.3s ease;
    }
    .popup-enter-from, .popup-leave-to {
      opacity: 0;
    }
  </style>
</head>
<body class="flex items-start justify-center p-6 relative">
  <div id="app" class="flex w-full max-w-7xl gap-8">

    <!-- (à¹€à¸™à¸·à¹‰à¸­à¸«à¸²à¹€à¸«à¸¡à¸·à¸­à¸™à¹€à¸”à¸´à¸¡ à¸¢à¹ˆà¸­à¹„à¸§à¹‰à¹€à¸žà¸·à¹ˆà¸­à¸„à¸§à¸²à¸¡à¸à¸£à¸°à¸Šà¸±à¸š) -->

    <!-- ... -->

  </div>

  <!-- ðŸ”Š à¹€à¸ªà¸µà¸¢à¸‡à¸•à¸´à¹Šà¸à¹€à¸¡à¸·à¹ˆà¸­à¸—à¸³à¸‡à¸²à¸™à¹€à¸ªà¸£à¹‡à¸ˆ -->
  <audio id="dingSound" preload="auto">
    <source src="https://www.myinstants.com/media/sounds/mixkit-achievement-bell-600.wav" type="audio/wav">
  </audio>

  <script>
    const { createApp } = Vue;

    createApp({
      data() {
        return {
          tasks: [],
          newTask: "",
          showPending: false
        };
      },
      computed: {
        currentTask() {
          const task = this.tasks.find((t) => !t.done);
          return task ? task.text : null;
        },
        pendingTasks() {
          return this.tasks.filter((t) => !t.done);
        },
        completedTasks() {
          return this.tasks.filter((t) => t.done).slice().reverse();
        }
      },
      methods: {
        addTask() {
          if (this.newTask.trim() === "") return;

          const lines = this.newTask
            .split(/\r?\n/)
            .map(line => line.trim())
            .filter(line => line !== "");

          lines.forEach(line => {
            this.tasks.push({ text: line, done: false });
          });

          this.newTask = "";
          this.saveTasks();
        },
        completeTask() {
          const index = this.tasks.findIndex((t) => !t.done);
          if (index !== -1) {
            this.tasks[index].done = true;
            const [doneTask] = this.tasks.splice(index, 1);
            this.tasks.push(doneTask);
            this.saveTasks();

            // âœ… à¹€à¸¥à¹ˆà¸™à¹€à¸ªà¸µà¸¢à¸‡à¸•à¸´à¹Šà¸
            const sound = document.getElementById("dingSound");
            if (sound) sound.play();
          }
        },
        moveUpCompleted(index) {
          const completed = this.completedTasks;
          if (index > 0) {
            const globalIndex1 = this.tasks.indexOf(completed[index]);
            const globalIndex2 = this.tasks.indexOf(completed[index - 1]);
            [this.tasks[globalIndex1], this.tasks[globalIndex2]] = [
              this.tasks[globalIndex2],
              this.tasks[globalIndex1]
            ];
            this.saveTasks();
          }
        },
        moveDownCompleted(index) {
          const completed = this.completedTasks;
          if (index < completed.length - 1) {
            const globalIndex1 = this.tasks.indexOf(completed[index]);
            const globalIndex2 = this.tasks.indexOf(completed[index + 1]);
            [this.tasks[globalIndex1], this.tasks[globalIndex2]] = [
              this.tasks[globalIndex2],
              this.tasks[globalIndex1]
            ];
            this.saveTasks();
          }
        },
        moveUpPending(index) {
          const pending = this.pendingTasks;
          if (index > 0) {
            const globalIndex1 = this.tasks.indexOf(pending[index]);
            const globalIndex2 = this.tasks.indexOf(pending[index - 1]);
            [this.tasks[globalIndex1], this.tasks[globalIndex2]] = [
              this.tasks[globalIndex2],
              this.tasks[globalIndex1]
            ];
            this.saveTasks();
          }
        },
        moveDownPending(index) {
          const pending = this.pendingTasks;
          if (index < pending.length - 1) {
            const globalIndex1 = this.tasks.indexOf(pending[index]);
            const globalIndex2 = this.tasks.indexOf(pending[index + 1]);
            [this.tasks[globalIndex1], this.tasks[globalIndex2]] = [
              this.tasks[globalIndex2],
              this.tasks[globalIndex1]
            ];
            this.saveTasks();
          }
        },
        deleteTask(task) {
          const index = this.tasks.indexOf(task);
          if (index !== -1) {
            this.tasks.splice(index, 1);
            this.saveTasks();
          }
        },
        saveTasks() {
          localStorage.setItem('tasks', JSON.stringify(this.tasks));
        },
        loadTasks() {
          const saved = localStorage.getItem('tasks');
          if (saved) {
            this.tasks = JSON.parse(saved);
          }
        }
      },
      mounted() {
        this.loadTasks();
      }
    }).mount("#app");
  </script>
</body>
</html>